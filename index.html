<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Pakeperro — Menú</title>

  <!-- Tailwind CDN -->
  <script src="https://cdn.tailwindcss.com"></script>

  <style>
    .no-scrollbar::-webkit-scrollbar { display: none; }
    .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
    section[id^="sec-"] { scroll-margin-top: 96px; }
  </style>
</head>
<body class="bg-white text-neutral-900">

  <!-- Header -->
  <header id="siteHeader" class="sticky top-0 z-40 backdrop-blur bg-white/80 border-b">
    <div class="max-w-3xl mx-auto px-4 py-3 flex items-center gap-3">
      <img src="IMG_2292.JPG" alt="Logo Pakeperro" class="w-20 h-20 rounded-xl object-cover border" />
      <div class="flex-1">
        <h1 class="text-xl font-bold">Pakeperro — Menú</h1>
        <p class="text-xs text-neutral-500">Rápido, fresco y con mucho sabor</p>
      </div>
      <button id="shareBtn" class="px-3 py-1.5 text-sm rounded-xl border hover:bg-neutral-50">
        Compartir
      </button>
    </div>

    <div class="max-w-3xl mx-auto px-4 pb-3">
      <input id="searchInput" type="text"
        placeholder="Buscar (ej: perro, tocineta, jugo)"
        class="w-full text-sm px-3 py-2 rounded-xl border focus:ring focus:ring-neutral-200" />
      <div id="chips" class="mt-2 flex gap-2 overflow-x-auto no-scrollbar py-2"></div>
    </div>
  </header>

  <!-- Toast -->
  <div id="toastCopied"
    class="hidden fixed top-4 left-1/2 -translate-x-1/2 z-50 bg-black text-white text-sm px-3 py-1.5 rounded-lg">
    Enlace copiado ✅
  </div>

  <!-- Promos -->
  <section class="max-w-3xl mx-auto px-4 pt-6">
    <h2 class="text-lg font-semibold mb-3">Promociones</h2>
    <div id="promos" class="grid gap-3"></div>
  </section>

  <!-- Contenido -->
  <main id="content" class="max-w-3xl mx-auto px-4 py-6"></main>

  <!-- Modal TikTok -->
  <div id="modal" class="hidden fixed inset-0 z-50 items-center justify-center p-4">
    <div id="modalBg" class="absolute inset-0 bg-black/60"></div>
    <div class="relative w-full max-w-md bg-white rounded-2xl overflow-hidden">
      <div class="flex justify-between items-center px-4 py-3 border-b">
        <h3 id="modalTitle" class="text-sm font-semibold truncate"></h3>
        <button id="modalClose" class="text-xs border px-2 py-1 rounded">Cerrar</button>
      </div>
      <div class="aspect-[9/16]" id="modalBody"></div>
      <div class="flex justify-between items-center px-4 py-3 border-t">
        <span id="modalPrice" class="font-semibold"></span>
        <div class="flex gap-2">
          <a id="modalOpenTikTok" target="_blank"
            class="text-xs border px-3 py-1.5 rounded hover:bg-neutral-50">Abrir TikTok</a>
          <button id="modalShare" class="text-xs border px-3 py-1.5 rounded">Compartir</button>
        </div>
      </div>
    </div>
  </div>

<script type="module">
/* ======================
   LINKS SOCIALES (EDITA SOLO AQUÍ)
====================== */
const SOCIAL_LINKS = {
  tiktok: {
    "perro-venezolano": "https://www.tiktok.com/t/ZThjswgAm/",
    "hamb-sencilla": "https://www.tiktok.com/t/ZThjGh7AC/"
  },
  instagram: {
    "perro-venezolano": "https://www.instagram.com/reel/DTYCK-gDseb/",
    "hamb-sencilla": "https://www.instagram.com/reel/DTYEnb0Di_h/"
  }
};

const getSocialLink = (p, id) => SOCIAL_LINKS?.[p]?.[id] || "";

/* ======================
   PROMOS
====================== */
const PROMOS = [
  { day:"Miércoles", weekdayIndex:3, title:"2 Perros + Refresco", description:"Combo especial", price:10 },
  { day:"Jueves", weekdayIndex:4, title:"Hamburguesa Combo", description:"Hamb + Papas + Refresco", price:10 }
];

/* ======================
   MENU
====================== */
const MENU = [
  { id:"perro-venezolano", title:"Perro Caliente Venezolano", description:"Full toppings", price:5, category:"hotdogs" },
  { id:"hamb-sencilla", title:"Hamburguesa Sencilla", description:"Doble carne smashed", price:10, category:"burgers" },
  { id:"agua", title:"Agua", price:1, category:"drinks" }
];

const CATEGORIES = [
  {id:"all",label:"Todo"},
  {id:"hotdogs",label:"Perros"},
  {id:"burgers",label:"Hamburguesas"},
  {id:"drinks",label:"Bebidas"}
];

const $ = s => document.querySelector(s);
const money = n => `$${n.toFixed(2)}`;

/* ======================
   RENDER PROMOS
====================== */
const promosWrap = $("#promos");
const today = new Date().getDay();
promosWrap.innerHTML = PROMOS.map(p=>`
  <div class="border rounded-xl p-4 ${p.weekdayIndex===today?'bg-yellow-50':''}">
    <h3 class="font-bold">${p.title}</h3>
    <p class="text-sm">${p.description}</p>
    <span class="font-semibold">${money(p.price)}</span>
  </div>
`).join("");

/* ======================
   CHIPS
====================== */
$("#chips").innerHTML = CATEGORIES.map(c=>`
  <button data-cat="${c.id}" class="border rounded-full px-3 py-1 text-xs">${c.label}</button>
`).join("");

let currentCat="all", query="";

/* ======================
   RENDER MENU
====================== */
function renderMenu(){
  $("#content").innerHTML = MENU.filter(m=>{
    return (currentCat==="all"||m.category===currentCat)
      && m.title.toLowerCase().includes(query.toLowerCase());
  }).map(item=>{
    const tk=getSocialLink("tiktok",item.id);
    const ig=getSocialLink("instagram",item.id);
    return `
      <article class="border rounded-xl p-4 mb-3">
        <div class="flex justify-between">
          <h3 class="font-bold">${item.title}</h3>
          <span>${money(item.price)}</span>
        </div>
        <p class="text-sm text-neutral-600">${item.description||""}</p>
        ${item.category!=="drinks"?`
        <div class="flex gap-2 mt-3">
          <button ${tk?`data-open="${item.id}"`:`disabled`}
            class="border px-3 py-1 text-xs rounded ${!tk?'opacity-40':''}">TikTok</button>
          <a ${ig?`href="${ig}" target="_blank"`:`aria-disabled="true"`}
            class="border px-3 py-1 text-xs rounded ${!ig?'opacity-40':''}">Instagram</a>
        </div>`:""}
      </article>`;
  }).join("");
}

renderMenu();

/* ======================
   FILTROS
====================== */
document.addEventListener("click",e=>{
  const btn=e.target.closest("[data-cat]");
  if(btn){currentCat=btn.dataset.cat;renderMenu();}
  const open=e.target.closest("[data-open]");
  if(open){
    const item=MENU.find(i=>i.id===open.dataset.open);
    openModal(item);
  }
});

/* ======================
   MODAL TIKTOK
====================== */
const modal=$("#modal"), modalBody=$("#modalBody"),
modalTitle=$("#modalTitle"), modalPrice=$("#modalPrice"),
modalOpen=$("#modalOpenTikTok");

function openModal(item){
  const tk=getSocialLink("tiktok",item.id);
  if(!tk)return;
  modalTitle.textContent=item.title;
  modalPrice.textContent=money(item.price);
  modalOpen.href=tk;
  modalBody.innerHTML=`<iframe src="${tk.replace("/video/","/embed/v2/")}"
    class="w-full h-full" allowfullscreen></iframe>`;
  modal.classList.remove("hidden");
}

$("#modalBg").onclick=()=>modal.classList.add("hidden");
$("#modalClose").onclick=()=>modal.classList.add("hidden");

/* ======================
   SHARE
====================== */
$("#shareBtn").onclick=async()=>{
  try{
    await navigator.share({title:"Pakeperro — Menú",url:location.href});
  }catch{
    await navigator.clipboard.writeText(location.href);
    $("#toastCopied").classList.remove("hidden");
    setTimeout(()=>$("#toastCopied").classList.add("hidden"),1500);
  }
};
</script>
</body>
</html>
